ALTER SESSION SET "_ORACLE_SCRIPT" = TRUE;  
CREATE USER ADMIN IDENTIFIED BY ADMIN;
GRANT CONNECT TO ADMIN;
GRANT CREATE SESSION TO ADMIN;
GRANT SYSDBA TO ADMIN ;
GRANT ALL PRIVILEGES TO ADMIN WITH ADMIN OPTION;
GRANT EXECUTE ANY PROCEDURE To ADMIN;
GRANT CREATE SESSION TO ADMIN ;
GRANT CONNECT, RESOURCE,DBA TO ADMIN;
GRANT UNLIMITED TABLESPACE TO ADMIN;
GRANT CREATE SESSION, CREATE ANY CONTEXT, CREATE PROCEDURE, CREATE TRIGGER, ADMINISTER DATABASE TRIGGER TO ADMIN;
GRANT EXEMPT ACCESS POLICY TO ADMIN;

DROP TABLE ADMIN.ChiTietHoSo;
DROP TABLE ADMIN.HoSoUngTuyen;
DROP TABLE ADMIN.PhieuUngTuyen;
DROP TABLE ADMIN.UngVien;
DROP TABLE ADMIN.PhieuDangKyDN;
DROP TABLE ADMIN.HoaDon;
DROP TABLE ADMIN.PhieuDangKyQuangCao;
DROP TABLE ADMIN.HinhThuc;
DROP TABLE ADMIN.PhieuDangTuyen;
DROP TABLE ADMIN.NhanVien;
DROP TABLE ADMIN.ChiTietGiaHan;
DROP TABLE ADMIN.DanhSachGiaHan;
DROP TABLE ADMIN.ChienLuocUuDai;
DROP TABLE ADMIN.DoanhNghiep;
DROP TABLE ADMIN.BanLanhDao;




--Tạo bảng với các khóa chính và khóa ngoại
-- Bảng UngVien
CREATE TABLE ADMIN.UngVien (
    MaUngVien VARCHAR2(10) PRIMARY KEY,
    HoTen NVARCHAR2(100),
    SDT NUMBER(10),
    Email VARCHAR2(50),
    DiaChi NVARCHAR2(100)
);
/
-- Bảng NhanVien
CREATE TABLE ADMIN.NhanVien (
    MaNhanVien VARCHAR2(10) PRIMARY KEY,
    TenNhanVien nVARCHAR2(50),
    SDT NUMBER(10),
    Email VARCHAR2(50)
);
/
-- Bảng PhieuUngTuyen
CREATE TABLE ADMIN.PhieuUngTuyen (
    MaPhieuUngTuyen VARCHAR2(10) PRIMARY KEY,
    ViTriUngTuyen NVARCHAR2(50),
    TinhTrangPhieu NVARCHAR2(50),
    MaUngVien VARCHAR2(10),
    MaNhanVien VARCHAR2(10),
    FOREIGN KEY (MaUngVien) REFERENCES ADMIN.UngVien(MaUngVien),
    FOREIGN KEY (MaNhanVien) REFERENCES ADMIN.NhanVien(MaNhanVien)
);
/
-- Bảng HoSoUngTuyen
CREATE TABLE ADMIN.HoSoUngTuyen (
    MaHoSo VARCHAR2(10) PRIMARY KEY,
    NgayNopHoSo DATE,
    TinhTrangHS NVARCHAR2(50),
    MaPhieuUngTuyen VARCHAR2(10),
    FOREIGN KEY (MaPhieuUngTuyen) REFERENCES ADMIN.PhieuUngTuyen(MaPhieuUngTuyen)
);
/
-- Bảng ChiTietHoSo
CREATE TABLE ADMIN.ChiTietHoSo (
    STT NUMBER,
    LoaiHoSo NVARCHAR2(50),
    TenHoSo NVARCHAR2(100),
    MaHoSo VARCHAR2(10),
    FOREIGN KEY (MaHoSo) REFERENCES ADMIN.HoSoUngTuyen(MaHoSo),
    PRIMARY KEY (STT,MaHoSo)
);
/
-- Bảng DoanhNghiep
CREATE TABLE ADMIN.DoanhNghiep (
    MaCongTy VARCHAR2(10) PRIMARY KEY,
    TenCongTy NVARCHAR2(100),
    MaSoThue VARCHAR2(20),
    NguoiDaiDien NVARCHAR2(50),
    DiaChi VARCHAR2(100),
    Email VARCHAR2(50)
);
-- Bảng PhieuDangKyDN
CREATE TABLE ADMIN.PhieuDangKyDN (
    MaPhieu VARCHAR2(10) PRIMARY KEY,
    NgayTaoPhieu DATE,
    TinhTrang VARCHAR2(20),
    MaNhanVien VARCHAR2(10),
    MaCongTy VARCHAR2(10),
    FOREIGN KEY (MaNhanVien) REFERENCES ADMIN.NhanVien(MaNhanVien),
    FOREIGN KEY(MaCongTy) REFERENCES ADMIN.DoanhNghiep(MaCongTy)
);
/
-- Bảng PhieuDangTuyen
CREATE TABLE ADMIN.PhieuDangTuyen (
    MaPhieuDangTuyen VARCHAR2(10) PRIMARY KEY,
    ViTriUngTuyen NVARCHAR2(50),
    SoLuongTuyenDung NUMBER,
    KhoangThoiGianDangTuyen VARCHAR2(50),
    TieuChi NVARCHAR2(100),
    TongTien NUMBER,
    MaCongTy VARCHAR2(10),
    MaNhanVien VARCHAR2(10),
    FOREIGN KEY (MaNhanVien) REFERENCES ADMIN.NhanVien(MaNhanVien),
    FOREIGN KEY (MaCongTy) REFERENCES ADMIN.DoanhNghiep(MaCongTy)
);
/
-- Bảng HoaDon
CREATE TABLE ADMIN.HoaDon (
    MaHoaDon VARCHAR2(10) PRIMARY KEY,
    HinhThucTT NVARCHAR2(50),
    ThoiGian DATE,
    TongTienDaThanhToan NUMBER,
    MaPhieuDangTuyen VARCHAR2(10),
    FOREIGN KEY (MaPhieuDangTuyen) REFERENCES ADMIN.PhieuDangTuyen(MaPhieuDangTuyen)
);
/
-- Bảng ChienLuocUuDai
CREATE TABLE ADMIN.ChienLuocUuDai (
    MaChienLuoc VARCHAR2(10) PRIMARY KEY,
    TenChienLuoc NVARCHAR2(100),
    ChiTietUuDai NVARCHAR2(200)
);
/
-- Bảng BanLanhDao
CREATE TABLE ADMIN.BanLanhDao (
    MaBLD VARCHAR2(10) PRIMARY KEY,
    TenBLD NVARCHAR2(50)
);
/
-- Bảng DanhSachGiaHan
CREATE TABLE ADMIN.DanhSachGiaHan (
    MaDS VARCHAR2(10) PRIMARY KEY,
    NgayLap DATE,
    MaBLD VARCHAR2(10),
    FOREIGN KEY (MaBLD) REFERENCES ADMIN.BanLanhDao(MaBLD)
);
/
-- Bảng ChiTietGiaHan
CREATE TABLE ADMIN.ChiTietGiaHan (
    TiemNangLon NUMBER(1),
    MaChienLuoc VARCHAR2(10),
    MaDS VARCHAR2(10),
    MaCongTy VARCHAR2(10),
    FOREIGN KEY (MaDS) REFERENCES ADMIN.DanhSachGiaHan(MaDS),
    FOREIGN KEY (MaCongTy) REFERENCES ADMIN.DoanhNghiep(MaCongTy),
    FOREIGN KEY (MaChienLuoc) REFERENCES ADMIN.ChienLuocUuDai(MaChienLuoc),
    PRIMARY KEY(MaChienLuoc,MaDS,MaCongTy)
);
/
-- Bảng HinhThuc
CREATE TABLE ADMIN.HinhThuc (
    MaHinhThuc VARCHAR2(10) PRIMARY KEY,
    TenHinhThuc VARCHAR2(50),
    DonGia NUMBER
);
/
-- Bảng PhieuDangKyQuangCao
CREATE TABLE ADMIN.PhieuDangKyQuangCao (
    MaPhieuQC VARCHAR2(10) PRIMARY KEY,
    ThoiGianDT VARCHAR2(50),
    NgayLapPhieu DATE,
    MaPhieuDangTuyen VARCHAR2(10),
    MaHinhThuc VARCHAR2(10),
    FOREIGN KEY (MaPhieuDangTuyen) REFERENCES ADMIN.PhieuDangTuyen(MaPhieuDangTuyen),
    FOREIGN KEY (MaHinhThuc) REFERENCES ADMIN.HinhThuc(MaHinhThuc)
);
/

